---
title: Ubuntu下常用指令
---

## 前言

最近租了个服务器，用的是ubuntu17.10版本系统，所以搜集了一部分常用的指令，方便以后查阅。

<!--more-->

## 基本命令

### 常用命令

#### 帮助

``` bash
–help 简单的帮助

help command 详细的帮助

man command 最详细的帮助
```

#### ls 命令（显示当前目录文件）

``` bash
-a 显示全部文件与文件夹，包括隐藏的文件或文件夹

-l 显示详细的文件信息，包括权限，用户，用户组等

-h 将文件大小以方便阅读的形式表示出来，配合-l参数使用，常有奇效
```

#### cd 进入其他目录

``` bash
cd /etc/ 从绝对路径进入etc文件夹

cd etc/ 从当前目录进入etc文件夹

cd .. 返回当前目录的上一级目录

cd – 返回上一次所在的目录

cd 或 cd ~ 返回属主目录
```

#### tab键 命令补全

tab键常用于在你输入了命令的前几个单词时，按下tab键进行补全，如果有多个前面部分相同的命令，则按两次tab键

#### alias 别名

``` bash
alias ubuntu=”ls” 用于为一个命令取别名，当你输入ubuntu时等价输入了ls命令
```

#### apt-get 下载

最常用的指令，用于从软件源获取需要的软件

常用参数：

``` bash
update 与你的软件源（在/etc/apt/sources.list中列出）更新软件包列表，换源后需要执行

upgrade 根据update得到的源软件库与本地已经安装的对比，如果需要升级就全部升级

install 安装软件包，可以使用tab键补全软件包的名字

remove 卸载软件包

purge 卸载软件包，同时删除该软件的配置文件

source 从源里下载软件包的源码到当前目录并解压（除非指定-download-only参数）

check 用来（自动）修复已安装软件包之间的依赖关系

clean 清除/var/cache/apt/archives/包括其子目录partial/下的所有软件包缓存

autoclean 删除旧版本的软件包缓存

download 下载软件包的二进制包到当前目录
```

#### more、less 分页显示文本文件内容

#### head、tail 显示文件头、尾内容

#### | 管道符 连接多个命令

将一个命令的标准输出作为另一个命令的标准输入。也就是把几个命令组合起来使用，后一个命令除以前一个命令的结果。

例：grep -r “close” /home/* | more 在home目录下所有文件中查找，包括close的文件，并分页输出。

#### grep 字符串 在文本文件中查找某个字符串

#### sudo 管理员权限

sudo 我们主要用来临时提升权限，主要用以管理员(超级用户)的权限来运行命令，当需要修改当前登录用户力所不能及的文件/目录时需要用sudo

### 文件操作

#### find 起始目录 -name 查找的文件或目录

#### mkdir 目录名 创建一个目录

-p 如果给出的路径中父目录不存在,则同时创建父目录

#### touch 文件名 .. 创建一个或多个文件

#### rmdir 空目录名 删除一个空目录

等同 rm -f

#### rm 文件名 .. 删除一个或多个文件

最常用参数:

``` bash
-f 不提示不存在的文件,直接跳过

-i 每个删除动作都提示

-I 删除多个文件(多于3个时)或者递归式删除(对于非空目录)提示一次

-r和-R 递归式删除该目录下的一切东东

-v 显示每个文件的删除动作(个人总是推荐使用此参数,明白你在做什么)
```

### 注意：慎用

``` bash
rm -rf 非空目录名 删除一个非空目录下的一切
```

#### mv 源文件或目录 目标文件或目录

根据mv命令中的第二个参数类型（是目标文件还是目标目录），mv命令将文件重命名或将其移至一个新的目录中。当第二个参数类型是文件时，mv命令完成文件重命名，此时，源文件只能有一个（也可以是源目录名），它将所给的源文件或目录重命名为给定的目标文件名。当第二个参数是已存在的目录名称时，源文件或目录参数可以有多个，mv命令将各参数指定的源文件均移至目标目录中。


### 最常用参数:

```
-b 为每个已经存在的目的文件做个备份(防止覆盖)

-f 不提示是否覆盖已经存在的目的文件

-i 与-f参数相反

-u 仅当源文件比目的文件更新或者目的文件不存在时候才移动

-v 显示移动文件的进度(个人总是推荐使用此参数,明白你在做什么)
```

#### cat 文件名 ..

把(一个或多个)文件内容(连接)显示到标准输出，当文本文件很小，而且你只是想看下，并不打算用gedit或者vim之类编辑器编辑的时候，可以使用。

#### find 路经 -name

“字符串”查找路经所在范围内满足字符串匹配的文件和目录

### 最常用参数:

``` bash
-v 列出当前正在执行的步骤

-R 递归式,即改变非空目录下的一切为指定权限
```

#### cp 文件名或目录名 拷贝文件或目录

### 最常用参数：

``` bash
-b 为每个已经存在的目的文件作个备份

-d 遇到软链接时不拷贝软链接所指向的文件;拷贝时保留links属性(链接数)

-p 保留文件的访问权限,所有者,和时间戳

-R和-r 递归式拷贝(cp过程遇到非空目录才有效),即拷贝目录,子目录,子目录的子目录…..

-a 作用同-dpR

-s 并不真的做拷贝,而只是为每个文件作软链接(符号链接)

-u 仅当源文件比目的文件更新或者目的文件不存在时候才拷贝
```

#### ln 源文件或目录 目标文件或目录 为文件建立连接

linux的链接分为两种:硬链接和软链接，ln默认建立硬链接，硬链接的意思是一个档案可以有多个名称，而软链接的方式则是产生一个特殊的档案，该档案的内容是指向另一个档案的位置。硬链接是存在同一个文件系统中，而软链接却可以跨越不同的文件系统

### 注意：

ln命令会保持每一处链接文件的同步性，也就是说，不论你改动了哪一处，其它的文件都会发生相同的变化

### 最常用参数:

``` bash
-s 建立软链接(符号链接,可以理解为win下的快捷方式)

-f 如果要建立的链接名已经存在,则删除之

-b 删除，覆盖以前建立的链接

-v 显示详细的处理过程
```

#### tar 打包与解包

和ps命令一样,tar一般不用单个参数,而是多个参数的组合,记住参数x是解压(extract),c是创建包(create)即可

### 最常用参数:

``` bash
-xvf 详细列出解包的步骤

-cvf 详细列出打包的步骤

-j 用来说明这是个tar.bz2包,例如tar -xjvf myfile.tar.bz2

-t 列出包中的文件列表
```

#### 打包时常追加的参数:

``` bash
-r 追加到压缩包中

-u 只把比包中更新的文件追加进去

-h 不把符号链接添加到包中,而是添加此符号链接指向的文件
```

### 用户管理

``` bash
/etc/passwd 存储用户账号

/etc/group 存储组账号

/etc/shadow 存储用户账号的密码

/etc/gshadow 存储用户组账号的密码

/etc/profile 系统环境变量

bash_profile 用户环境变量

.bashrc 用户环境变量

su user 切换用户，加载配置文件.bashrc

su – user 切换用户，加载配置文件/etc/profile ，加载bash_profile

useradd 创建一个新的用户

groupadd 组名 创建一个新的组

passwd 用户名 为用户创建密码
```

### 最常用参数：

``` bash
-d 用户名 删除用户密码也能登陆

-S 用户名 查询用户状态

usermod -l 新用户名 老用户名 为用户改名
userdel –r 用户名 删除用户一切
chown [-R] owner[:group] {File|Directory} 更改文件的用户及用户组

chown root:root filename

如果需要将某一目录下的所有文件都改变其拥有者，可以使用-R参数

chgrp [group] {File|Directory} 更改文件所属组群

chgrp root filename

chgrp
```

### 权限管理

三种基本权限

R 读 数值表示为4

W 写 数值表示为2

X 可执行 数值表示为1

例如：

-rw-rw-r–一共十个字符，分成四段。

第一个字符“-”表示普通文件；这个位置还可能会出现“l”链接；“d”表示目录

第二三四个字符“rw-”表示当前所属用户的权限，所以用数值表示为4+2=6

第五六七个字符“rw-”表示当前所属组的权限，所以用数值表示为4+2=6

第八九十个字符“r–”表示其他用户权限，所以用数值表示为2

#### 更改权限

``` bash
sudo chmod [u所属用户 g所属组 o其他用户 a所有用户] [+增加权限 -减少权限] [r w x] 目录名

例如：有一个文件filename，权限为“-rw-r—-x”，将权限值改为“-rwxrw-r-x”，用数值表示为765

sudo chmod u+x g+w o+r filename

上面的例子可以用数值表示

sudo chmod 765 filename
```

### 系统管理

``` bash
ps，top 列出当前命令的执行状态
ps为静态，top为动态(top时’q’退出)
```

### 最常用参数(ps多用参数集合,而不是单个参数,并且配合grep使用):

``` bash
-ef 以标准语法列出当前所有进程状态,例如ps -ef | grep eva 列出eva的进程状态

aux 以BSD语法列出

-ejH 列出进程树

-eLf 同时列出线程状态

kill 进程号(PID) 杀死一个进程
kill -9 进程号 强制杀死一个进程
stat 显示指定文件的详细信息，比ls更详细
who 显示在线登陆用户
whoami 显示当前操作用户
hostname 显示主机名
uname 显示系统信息
du 查看目录大小 du -h /home带有单位显示目录信息
df 查看磁盘大小 df -h 带有单位显示磁盘信息
ifconfig 查看网络情况
ping 测试网络连通
netstat 显示网络状态信息
```

#### 常用参数

``` bash
-a (all)显示所有选项，默认不显示LISTEN相关

-t (tcp)仅显示tcp相关选项

-u (udp)仅显示udp相关选项

-n 拒绝显示别名，能显示数字的全部转化成数字。

-l 仅列出有在 Listen (监听) 的服務状态

-p 显示建立相关链接的程序名

-r 显示路由信息，路由表

-e 显示扩展信息，例如uid等

-s 按各个协议进行统计

-c 每隔一个固定时间，执行该netstat命令。
```

#### 注意：

LISTEN和LISTENING的状态只有用-a或者-l才能看到

man 功能很多，简单的可以查看命令帮助，如：man ls

ufw 防火墙

#### 常用参数：

enable 启动防火墙

status 查看防火墙状态

allow 端口号或服务名 开放指定端口号

allow 22/tcp 只打开使用tcp/ip协议的22端口

disable 关闭防火墙

allow from 192.168.254.254 允许某特定IP

delete allow 删除已添加的规则

clear 清屏